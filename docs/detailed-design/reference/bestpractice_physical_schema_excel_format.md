# 物理スキーマ情報Excel形式ドキュメント

## 概要

物理スキーマ定義書の情報をExcel形式で管理するための参考資料です。CSVファイルとして作成し、Excelで開いて利用することを想定しています。

## ファイル一覧

### 1. テーブル構造定義（physical-schema-tables.csv）
全テーブルのカラム定義を網羅した一覧表

**列構成:**
- テーブル名
- テーブル種別（マスタ/ファクト/ログ）
- 物理列名
- データ型
- NULL許可
- 制約
- デフォルト値
- 説明

### 2. インデックス定義（physical-schema-indexes.csv）
パフォーマンス最適化のためのインデックス定義一覧

**列構成:**
- テーブル名
- インデックス名
- インデックス種別（単一列/複合）
- 対象列
- 用途

### 3. 外部キー制約（physical-schema-foreign-keys.csv）
テーブル間の参照整合性制約定義

**列構成:**
- 子テーブル
- 外部キー列
- 参照テーブル
- 参照列
- 制約名

### 4. ビュー定義（physical-schema-views.csv）
データ抽出・集計用のビュー定義一覧

**列構成:**
- ビュー名
- ビュー種別
- 説明
- 主要な集計項目
- 結合テーブル

## Excel活用方法

### データ設計レビュー時
1. **テーブル構造シート**: カラム設計の妥当性確認
2. **外部キーシート**: テーブル間関係の整合性確認
3. **インデックスシート**: パフォーマンス設計の適切性確認

### 実装時の参照
1. **フィルタ機能**: 特定テーブルの情報を抽出
2. **ソート機能**: データ型別、制約別の整理
3. **検索機能**: 特定カラム名の横断検索

### データ移行計画
1. **テーブル作成順序**: 外部キー制約を考慮した作成順序の計画
2. **データ投入順序**: マスタ→ファクトの順序確認
3. **制約チェック**: 制約違反リスクの事前確認

## Excel編集時の注意点

### データ整合性の維持
- CSVファイルを直接編集した場合は、Markdownの元ファイルとの同期を確認
- 制約定義の変更時は、DDLスクリプトへの反映も必要

### 文字化け対策
- UTF-8 BOM付きで保存することを推奨
- 日本語が含まれる場合はExcelの文字エンコーディング設定を確認

### バージョン管理
- 修正履歴をExcelのコメント機能で記録
- 重要な変更は元のMarkdown文書にも反映

## 利用シーン別ガイド

### プロジェクト開始時
- 全体のテーブル構造を俯瞰的に把握
- データモデリングの妥当性確認

### 開発中
- 実装中のテーブルに関連する制約・インデックス情報の迅速な確認
- テーブル間関係の参照

### 運用・保守時
- パフォーマンス問題発生時のインデックス設計確認
- データ品質問題発生時の制約設計確認

---

**作成日**: 2024年8月24日  
**形式**: CSV（Excel互換）  
**更新頻度**: 物理スキーマ定義書の変更に合わせて更新  
**関連ドキュメント**: [物理スキーマ定義書](../physical-schema-definition.md)